<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8"/>
	<title>Lovicash: A web-based peer-to-peer Electronic Cash System</title>
</head>
<body>
	<script src="utils/indexed-db/IndexedDB.js"></script>
	<script src="utils/indexed-db/ObjectDB.js"></script>
	<script src="utils/indexed-db/storage-persistence.js"></script>
	<script src="utils/Observable.js"></script>
	<script src="utils/Synchronizer.js"></script>
	<script src="utils/array/IndexedArray.js"></script>
	<script src="utils/buffer/Buffer.js"></script>
	<script src="utils/buffer/BufferUtils.js"></script>
	<script src="utils/crypto/crypto.js"></script>
	<script src="utils/number/NumberUtils.js"></script>
	<script src="utils/object/ObjectUtils.js"></script>
	<script src="consensus/primitive/Primitive.js"></script>
	<script src="consensus/primitive/Hash.js"></script>
	<script src="consensus/primitive/PrivateKey.js"></script>
	<script src="consensus/primitive/PublicKey.js"></script>
	<script src="consensus/primitive/Signature.js"></script>
	<script src="consensus/account/Accounts.js"></script>
	<script src="consensus/account/AccountsTree.js"></script>
	<script src="consensus/account/AccountsTreeStore.js"></script>
	<script src="consensus/account/Address.js"></script>
	<script src="consensus/account/Balance.js"></script>
	<script src="consensus/block/BlockBody.js"></script>
	<script src="consensus/block/BlockHeader.js"></script>
	<script src="consensus/block/Block.js"></script>
	<script src="p2p/message/P2PMessage.js"></script>
	<script src="p2p/message/BlockP2PMessage.js"></script>
	<script src="p2p/message/GetBlocksP2PMessage.js"></script>
	<script src="p2p/message/InventoryP2PMessage.js"></script>
	<script src="p2p/message/VersionP2PMessage.js"></script>
	<script src="p2p/message/P2PMessageFactory.js"></script>
	<script src="p2p/webrtc/certificate/webrtc-certificate.js"></script>
	<script src="p2p/webrtc/peer-portal/PeerPortal.js"></script>
	<script src="p2p/P2PAgent.js"></script>
	<script src="p2p/P2PChannel.js"></script>
	<script src="p2p/P2PNetwork.js"></script>
	<script src="p2p/struct/InvVector.js"></script>
	<script src="consensus/Consensus.js"></script>
	<script src="miner/Miner.js"></script>
	<script src="miner/old-miner.js"></script>
	<script src="miner/policy.js"></script>
	<script src="wallet/Wallet.js"></script>
	<script src="consensus/blockchain/Blockchain.js"></script>
	<script src="consensus/blockchain/BlockchainStore.js"></script>
	<script src="consensus/transaction/Transaction.js"></script>
	<!-- <script src="core.js"></script> -->
	

	<style type="text/css">
		body{
			padding: 5% 12%;
			background: #efefef;
			font-family: sans-serif;
		}

		#lastBlocks{
			display: flex;
			flex-direction: column-reverse;
		}
	</style>
	<div id="lastBlocks"></div>

	<script type="text/javascript">
		class MinerUI{
			constructor($){
				$.blockchain.on('head-changed', head => this._headChanged(head));
				this._lastBlocks = document.querySelector('#lastBlocks');
			}
			_headChanged(head){
				const el = document.createElement('div');
				el.innerHTML =`<b> ${head.timestamp}</b> prev: ${head.prevHash.toBase64()}`;
				this._lastBlocks.appendChild(el);
			}
		}
		Consensus.test().then( $ => {
			window.$ = $;
			const ui = new MinerUI($);
		});

	</script>
</body>
</html>